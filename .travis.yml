language: php

php:
   - 5.3
   - 5.5

env:
#   global:
#      - secure: ""

before_script:
   - composer self-update
#   - sh -c "if $TRAVIS_SECURE_ENV_VARS; then composer config --global github-oauth.github.com $GITHUB_OAUTH_TOKEN; fi"
   - composer install

script:
   - find src -name "*.php" -print0 | xargs -0 -n1 -P8 php -l
   - find app -name "*.php" -print0 | xargs -0 -n1 -P8 php -l
   - find web -name "*.php" -print0 | xargs -0 -n1 -P8 php -l
   #- php app/console lint:twig src
   - bin/phpunit --coverage-text
   - bin/phpcs --standard=vendor/apnet/coding-standard/src/Apnet src
   - bin/phpcs --standard=vendor/apnet/coding-standard/src/Apnet --ignore=app/cache app
